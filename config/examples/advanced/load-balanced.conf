# Load Balanced UTC Daemon Configuration
# Configuration for load-balanced deployments with multiple instances

# Network Configuration
listen_address = 0.0.0.0
listen_port = 37
enable_ipv6 = true
max_connections = 5000
connection_timeout = 5000
keepalive_timeout = 30000

# UTC Server Configuration
stratum = 2
sync_interval = 32
timeout = 1000
reference_servers = ["time.nist.gov", "time.google.com", "pool.ntp.org"]
sync_retry_interval = 5
max_sync_retries = 3
enable_peer_sync = true
peer_servers = ["utc-node1.example.com:37", "utc-node2.example.com:37", "utc-node3.example.com:37"]

# Logging Configuration
log_file = /var/log/simple-utcd/simple-utcd.log
log_level = INFO
enable_console_logging = false
enable_syslog = true
log_rotation_size = 100MB
log_rotation_count = 10
log_rotation_time = daily
enable_cluster_logging = true
cluster_log_endpoint = "http://log-aggregator.example.com:9200"

# Security Configuration
enable_authentication = true
authentication_key = ${UTCD_AUTH_KEY}
authentication_timeout = 5000
denied_clients = []
allowed_clients = ["192.168.0.0/16", "10.0.0.0/8", "172.16.0.0/12"]
enable_rate_limiting = true
rate_limit_requests_per_minute = 500
rate_limit_burst_size = 50

# Performance Configuration
worker_threads = 12
thread_pool_size = 24
max_pending_connections = 500
socket_buffer_size = 65536
enable_tcp_nodelay = true
enable_so_reuseport = true

# Load Balancing Configuration
enable_load_balancing = true
load_balance_algorithm = least_connections
upstream_servers = ["utc-node1.example.com:37", "utc-node2.example.com:37", "utc-node3.example.com:37"]
health_check_interval = 30
health_check_timeout = 5000
health_check_path = "/health"
failover_timeout = 10000
max_failover_attempts = 3
enable_sticky_sessions = false
session_timeout = 300

# Cluster Configuration
enable_clustering = true
cluster_name = "utc-cluster"
node_id = ${UTCD_NODE_ID}
cluster_discovery_method = "consul"
consul_endpoint = "http://consul.example.com:8500"
cluster_heartbeat_interval = 10
cluster_failover_timeout = 30
enable_auto_join = true
auto_join_retry_interval = 60

# Service Discovery
enable_service_discovery = true
service_name = "simple-utcd"
service_tags = ["utc", "time", "production"]
service_health_check = true
service_registration_ttl = 30
enable_health_endpoint = true
health_endpoint_port = 8080

# Memory Management
memory_pool_size = 1048576
max_memory_usage = 512MB
enable_memory_pooling = true
garbage_collection_interval = 300
enable_shared_memory = true
shared_memory_size = 10485760

# Statistics and Monitoring
enable_statistics = true
stats_interval = 30
enable_detailed_stats = true
stats_retention_days = 30
enable_performance_counters = true
enable_cluster_metrics = true
metrics_endpoint = "http://metrics.example.com:9090"

# Caching Configuration
enable_caching = true
cache_type = "redis"
cache_endpoint = "redis.example.com:6379"
cache_ttl = 60
cache_size = 10000
enable_cache_clustering = true
cache_replication_factor = 2

# Advanced Features
enable_connection_pooling = true
connection_pool_size = 1000
enable_async_io = true
io_threads = 4
enable_compression = false
enable_circuit_breaker = true
circuit_breaker_threshold = 5
circuit_breaker_timeout = 30

# Health Monitoring
enable_health_checks = true
health_check_interval = 30
health_check_timeout = 5000
enable_auto_restart = true
max_restart_attempts = 3
restart_delay = 10
enable_graceful_shutdown = true
shutdown_timeout = 30

# Network Optimization
enable_connection_reuse = true
max_connection_reuse = 100
connection_reuse_timeout = 300
enable_keepalive = true
keepalive_idle = 60
keepalive_interval = 10
keepalive_probes = 3

# Debugging and Development
debug_mode = false
verbose_logging = false
enable_trace_logging = false
trace_file = /var/log/simple-utcd/trace.log
enable_profiling = false
profile_output = /var/log/simple-utcd/profile.out
enable_cluster_debug = false
